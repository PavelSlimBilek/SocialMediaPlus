<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Home</title>
        <link rel="stylesheet" href="/style.css">
    </head>
    <body>
        <header>
            <h1 class="logo">+home</h1>
            <h4 th:text="'Logged as: ' + ${#authentication.name}"></h4>
        </header>

        <div th:replace="fragments/navbar :: navbar"></div>

        <main>
            <div th:each="post : ${posts}" class="display">
                <div class="displayHeader">
                    <div class="imageContainerSmall">
                        <img class="profileImageSmall" th:src="@{${post.getAuthor().getProfileImagePath()}}" th:alt="${post.getAuthor().getUsername()}" />
                    </div>
                    <div class="info">
                        <h2 th:text="${post.getTitle()}"></h2>
                        <h3 th:text="'by: ' + ${post.getAuthor().getUsername()}"></h3>
                    </div>
                </div>
                <div class="displayPanel">
                    <p th:text="'rating: ' + ${post.getRating()}"></p>
                    <p th:text="${post.formatCreationTime()}"></p>
                </div>
                <div class="displayContent">
                    <p th:text="${post.getContent()}"></p>
                </div>
                <div class="displayPanel">
                    <form action="/voteUp" method="post" th:id="${post.getId()}">
                        <input type="hidden" name="postID" th:value="${post.getId()}" />
                        <input type="hidden" name="username" th:value="${#authentication.name}" />
                        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                    </form>
                    <form action="/voteDown" method="post" th:id="'-' + ${post.getId()}">
                        <input type="hidden" name="postID" th:value="${post.getId()}" />
                        <input type="hidden" name="username" th:value="${#authentication.name}" />
                        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                    </form>
                    <button type="submit" class="smallButton" th:form="${post.getId()}">+</button>
                    <button type="submit" class="smallButton" th:form="'-' + ${post.getId()}">-</button>
                </div>
            </div>
        </main>
    </body>
</html>